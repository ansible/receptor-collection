---
- name: Copy receptor's build to "{{ receptor_install_dir }}"
  ansible.builtin.copy:
    src: "{{ local_receptor_path }}"
    dest: "{{ receptor_install_dir }}"
    owner: root
    group: root
    mode: 'u=rwx,go=rx'
    remote_src: true

- name: Add receptor's path to profile
  ansible.builtin.copy:
    dest: /etc/profile.d/receptor.sh
    content: "PATH=$PATH:{{ receptor_install_dir }}"
    owner: root
    group: root
    mode: 'u=rwx,go=rx'

- name: Create receptor's systemd service
  ansible.builtin.template:
    src: templates/receptor.service.j2
    dest: /lib/systemd/system/receptor.service
    mode: '0644'
    owner: root
    group: root
